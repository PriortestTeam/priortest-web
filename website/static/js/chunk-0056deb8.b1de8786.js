(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0056deb8"],{1772:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"comp-tree"},[r("div",{staticClass:"new_project"},[r("el-button",{attrs:{type:"primary",round:""}},[r("div",{on:{click:e.toViewManage}},[e._v(" 新建/管理视图 ")])]),r("span",{staticClass:"icon-box"},[r("i",{staticClass:"el-icon-d-arrow-left",attrs:{title:"折叠"},on:{click:e.hadleShow}})])],1),r("div",{staticClass:"comp-data"},[r("div",{staticClass:"big-width"},[r("el-tree",{attrs:{data:e.setTree,props:e.defaultProps,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return r("span",{staticClass:"custom-tree-node"},[r("span",{on:{click:function(t){return e.getList(n.data)}}},[e._v(e._s(n.label))])])}}])})],1)])])},o=[],a=r("24d2"),i={name:"ViewTree",props:{childScope:{type:String,required:!0}},data:function(){return{setTree:[],defaultProps:{children:"childViews",label:"title"},viewUrl:"/project/projectview?scope="+this.childScope,projectQuery:{pageNum:1,pageSize:10}}},computed:{projectInfo:function(){return this.$store.state.user.userinfo}},created:function(){this.queryViewTree()},methods:{toViewManage:function(){this.$store.commit("common/setNavName",this.childScope),this.$router.push("/project/projectview")},hadleShow:function(){this.$emit("hadleTree")},getList:function(e){console.log(e);var t={projectId:this.projectInfo.userUseOpenProject.projectId,viewTreeDto:{id:e.id}};this.$emit("childByValue",t)},queryViewTree:function(){var e=this,t={scope:this.childScope};Object(a["q"])(t).then((function(t){e.setTree=t.data}))}}},u=i,c=(r("55a0"),r("2877")),s=Object(c["a"])(u,n,o,!1,null,"2c2e417a",null);t["a"]=s.exports},"24d2":function(e,t,r){"use strict";r.d(t,"o",(function(){return o})),r.d(t,"a",(function(){return a})),r.d(t,"d",(function(){return i})),r.d(t,"f",(function(){return u})),r.d(t,"c",(function(){return c})),r.d(t,"r",(function(){return s})),r.d(t,"m",(function(){return l})),r.d(t,"b",(function(){return d})),r.d(t,"s",(function(){return p})),r.d(t,"e",(function(){return f})),r.d(t,"k",(function(){return h})),r.d(t,"n",(function(){return m})),r.d(t,"j",(function(){return b})),r.d(t,"i",(function(){return j})),r.d(t,"l",(function(){return w})),r.d(t,"p",(function(){return g})),r.d(t,"q",(function(){return v})),r.d(t,"h",(function(){return y})),r.d(t,"g",(function(){return O}));var n=r("b775");function o(e,t){return Object(n["a"])({url:"/project/queryForProjects",method:"post",params:e,data:t})}function a(e){return Object(n["a"])({url:"/project/addProject",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/project/deleteProject/"+e,method:"delete"})}function u(e){return Object(n["a"])({url:"/project/updateProject",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/project/checkProject/"+e,method:"get"})}function s(e,t){return Object(n["a"])({url:"/view/queryViews",method:"post",params:t,data:e})}function l(e){return Object(n["a"])({url:"/view/queryById/"+e,method:"get"})}function d(e){return Object(n["a"])({url:"/view/addViewRE",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/view/updateView",method:"post",data:e})}function f(e){return Object(n["a"])({url:"/view/deleteView/"+e,method:"delete"})}function h(){return Object(n["a"])({url:"/view/getViewFilter",method:"post"})}function m(e){return Object(n["a"])({url:"/user/queryByNameSubUsers",method:"post",params:e})}function b(e){return Object(n["a"])({url:"/project/queryById/"+e,method:"get"})}function j(e){return Object(n["a"])({url:"/project/getCloseProject",method:"get",params:e})}function w(e){return Object(n["a"])({url:"/view/getViewScopeChildParams",method:"get",params:e})}function g(e){return Object(n["a"])({url:"/view/queryViewParents",method:"get",params:e})}function v(e){return Object(n["a"])({url:"/view/queryViewTrees",method:"get",params:e})}function y(){return Object(n["a"])({url:"/project/getAllSysCustomField",method:"get"})}function O(e){return Object(n["a"])({url:"/project/getAllCustomField",method:"post",data:e})}},3005:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"project-container app-container"},[0==e.treeCol?r("div",{staticClass:"showBtn",on:{click:e.hadleTreeshow}},[r("i",{staticClass:"el-icon-d-arrow-right"})]):e._e(),r("el-row",[r("el-col",{attrs:{span:e.treeCol}},[r("view-tree",{attrs:{"child-scope":e.currentScope},on:{hadleTree:e.hadleTreeshow,childByValue:e.childByValue}})],1),r("el-col",{attrs:{span:24-e.treeCol}},[r("el-card",[r("div",{staticClass:"project_table"},[r("div",{staticClass:"new_project"},[r("el-button",{attrs:{type:"primary",round:""},on:{click:e.newproject}},[e._v(" 新建故事 ")])],1),r("div",{staticClass:"oprate_btn"},[r("el-button",{attrs:{type:"text"},on:{click:e.projectRefresh}},[e._v("刷新")]),r("el-button",{attrs:{type:"text",disabled:e.single},on:{click:e.projectClone}},[e._v("克隆")]),r("el-button",{attrs:{type:"text",disabled:e.multiple},on:{click:function(t){return e.delproject("all")}}},[e._v("批量删除")])],1),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"protable table"},[r("el-table",{ref:"featureData",staticStyle:{width:"100%"},attrs:{data:e.featureData,"header-cell-style":e.tableHeader,stripe:""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{type:"index",align:"center",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),r("el-table-column",{attrs:{prop:"title","show-overflow-tooltip":!0,align:"center",label:"标题"}}),r("el-table-column",{attrs:{prop:"epic","show-overflow-tooltip":!0,align:"center",label:"epic"}}),r("el-table-column",{attrs:{prop:"module",align:"center",label:"模块"}}),r("el-table-column",{attrs:{prop:"status",align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(1===t.row.status?"开发中":2===t.row.status?"计划中":"关闭"))])]}}])}),r("el-table-column",{attrs:{prop:"reportTo",align:"center",label:"负责人"}}),r("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建日期","min-width":"120","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{prop:"version",align:"center",label:"发行版本","min-width":"120","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{prop:"closeDate",align:"center",label:"关闭日期","min-width":"120","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.closeDate||"-"))])]}}])}),r("el-table-column",{attrs:{label:"操作","min-width":"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{staticClass:"table-btn",attrs:{type:"text"},on:{click:function(r){return r.stopPropagation(),e.openEdit(t.row)}}},[e._v("编辑")]),r("el-button",{staticClass:"table-btn",attrs:{type:"text"},on:{click:function(r){return r.stopPropagation(),e.delproject(t.row.id)}}},[e._v("删除")]),0!==t.row.status?r("el-button",{staticClass:"table-btn",attrs:{type:"text"},on:{click:function(r){return r.stopPropagation(),e.closeEdit(t.row)}}},[e._v("关闭")]):e._e()]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.featureTotal>0,expression:"featureTotal > 0"}],attrs:{total:e.featureTotal,page:e.featureQuery.pageNum,limit:e.featureQuery.pageSize},on:{"update:page":function(t){return e.$set(e.featureQuery,"pageNum",t)},"update:limit":function(t){return e.$set(e.featureQuery,"pageSize",t)},pagination:e.getfeatureList}})],1)])])],1)],1)],1)},o=[],a=r("1da1"),i=(r("96cf"),r("d3b7"),r("fb6a"),r("1772")),u=r("cf45"),c=r("4703"),s={name:"Feature",components:{viewTree:i["a"]},data:function(){return{treeCol:5,currentScope:"Feature",tableHeader:{color:"#d4dce3",background:"#4286CD"},isLoading:!1,activeNames:["1"],featureQuery:{pageNum:1,pageSize:10},featureTotal:0,featureData:[],multipleSelection:[],single:!0,multiple:!0,featureIds:"",setTree:[],featureBody:{scope:"",projectId:""},viewSearchQueryId:""}},computed:{projectInfo:function(){return this.$store.state.user.userinfo}},created:function(){this.getfeatureList()},methods:{newproject:function(){this.$router.push({name:"Addfeature"})},getfeatureList:function(){var e=this;this.isLoading=!0;var t={projectId:this.projectInfo.userUseOpenProject.projectId,viewTreeDto:{id:this.viewSearchQueryId}};return new Promise((function(r,n){Object(c["f"])(e.featureQuery,t).then(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:"200"===n.code&&(n.total>0&&(e.featureBody.scope=n.data[0].scope,e.featureBody.projectId=e.projectInfo.userUseOpenProject.projectId),e.isLoading=!1,e.featureData=n.data,e.featureTotal=n.total,r(n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))},projectRefresh:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getfeatureList();case 2:r=t.sent,"200"===r.code&&(Object(u["e"])("success","刷新成功"),e.viewSearchQueryId="");case 4:case"end":return t.stop()}}),t)})))()},projectClone:function(){Object(u["e"])("error","暂未开发")},delproject:function(e){var t=this;"all"!==e?Object(c["c"])(e).then((function(e){"200"===e.code&&(Object(u["e"])("success",e.msg),t.getfeatureList())})):Object(u["e"])("error","暂未开发")},handleSelectionChange:function(e){this.multipleSelection=e,this.featureIds="";for(var t=0;t<e.length;t++)this.featureIds+=e[t].id+",";this.featureIds=this.featureIds.slice(0,this.featureIds.length-1),this.multiple=!e.length,this.single=1!==e.length},openEdit:function(e){this.$router.push({name:"Addfeature",query:{id:e.id}})},closeEdit:function(e){var t=this,r={id:e.id};Object(c["b"])(r).then((function(e){"200"===e.code&&(Object(u["e"])("success",e.msg),t.getfeatureList())})).catch((function(e){console.log(e)}))},childByValue:function(e){var t=this;this.isLoading=!0,this.viewSearchQueryId=e.viewTreeDto.id,Object(c["f"])(this.featureQuery,e).then((function(e){t.featureData=e.data,t.featureTotal=e.total,t.isLoading=!1}))},hadleTreeshow:function(){this.treeCol=5===this.treeCol?0:5}}},l=s,d=(r("3a80"),r("2877")),p=Object(d["a"])(l,n,o,!1,null,"31187a6f",null);t["default"]=p.exports},"3a80":function(e,t,r){"use strict";r("e1d1")},4703:function(e,t,r){"use strict";r.d(t,"f",(function(){return o})),r.d(t,"g",(function(){return a})),r.d(t,"a",(function(){return i})),r.d(t,"d",(function(){return u})),r.d(t,"c",(function(){return c})),r.d(t,"e",(function(){return s})),r.d(t,"b",(function(){return l})),r.d(t,"h",(function(){return d}));var n=r("b775");function o(e,t){return Object(n["a"])({url:"/feature/queryList",method:"post",params:e,data:t})}function a(e){return Object(n["a"])({url:"/leftJoin/queryFeatureTitles",method:"get",params:e})}function i(e){return Object(n["a"])({url:"/feature/insert",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/feature/queryById/"+e,method:"get"})}function c(e){return Object(n["a"])({url:"/feature/delete/"+e,method:"delete"})}function s(e){return Object(n["a"])({url:"/feature/update",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/feature/closeUpdate",method:"post",params:e})}function d(e){return Object(n["a"])({url:"/feature/querySprintList",method:"post",params:e})}},"55a0":function(e,t,r){"use strict";r("e29b")},e1d1:function(e,t,r){},e29b:function(e,t,r){}}]);