(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d25dd5e"],{1666:function(e,t,r){},"24d2":function(e,t,r){"use strict";r.d(t,"o",(function(){return o})),r.d(t,"a",(function(){return n})),r.d(t,"d",(function(){return u})),r.d(t,"f",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"r",(function(){return l})),r.d(t,"m",(function(){return c})),r.d(t,"b",(function(){return d})),r.d(t,"s",(function(){return m})),r.d(t,"e",(function(){return p})),r.d(t,"k",(function(){return f})),r.d(t,"n",(function(){return b})),r.d(t,"j",(function(){return h})),r.d(t,"i",(function(){return j})),r.d(t,"l",(function(){return v})),r.d(t,"p",(function(){return F})),r.d(t,"q",(function(){return g})),r.d(t,"h",(function(){return O})),r.d(t,"g",(function(){return y}));var s=r("b775");function o(e,t){return Object(s["a"])({url:"/project/queryForProjects",method:"post",params:e,data:t})}function n(e){return Object(s["a"])({url:"/project/addProject",method:"post",data:e})}function u(e){return Object(s["a"])({url:"/project/deleteProject/"+e,method:"delete"})}function i(e){return Object(s["a"])({url:"/project/updateProject",method:"post",data:e})}function a(e){return Object(s["a"])({url:"/project/checkProject/"+e,method:"get"})}function l(e,t){return Object(s["a"])({url:"/view/queryViews",method:"post",params:t,data:e})}function c(e){return Object(s["a"])({url:"/view/queryById/"+e,method:"get"})}function d(e){return Object(s["a"])({url:"/view/addViewRE",method:"post",data:e})}function m(e){return Object(s["a"])({url:"/view/updateView",method:"post",data:e})}function p(e){return Object(s["a"])({url:"/view/deleteView/"+e,method:"delete"})}function f(){return Object(s["a"])({url:"/view/getViewFilter",method:"post"})}function b(e){return Object(s["a"])({url:"/user/queryByNameSubUsers",method:"post",params:e})}function h(e){return Object(s["a"])({url:"/project/queryById/"+e,method:"get"})}function j(e){return Object(s["a"])({url:"/project/getCloseProject",method:"get",params:e})}function v(e){return Object(s["a"])({url:"/view/getViewScopeChildParams",method:"get",params:e})}function F(e){return Object(s["a"])({url:"/view/queryViewParents",method:"get",params:e})}function g(e){return Object(s["a"])({url:"/view/queryViewTrees",method:"get",params:e})}function O(){return Object(s["a"])({url:"/project/getAllSysCustomField",method:"get"})}function y(e){return Object(s["a"])({url:"/project/getAllCustomField",method:"post",data:e})}},5132:function(e,t,r){"use strict";r.d(t,"e",(function(){return o})),r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return u})),r.d(t,"b",(function(){return i})),r.d(t,"d",(function(){return a}));var s=r("b775");function o(e,t){return Object(s["a"])({url:"/issue/queryList",method:"post",params:e,data:t})}function n(e){return Object(s["a"])({url:"/issue/insert",method:"post",data:e})}function u(e){return Object(s["a"])({url:"/issue/queryById/"+e,method:"get"})}function i(e){return Object(s["a"])({url:"/issue/delete/"+e,method:"delete"})}function a(e){return Object(s["a"])({url:"/issue/update",method:"post",data:e})}},b3ed:function(e,t,r){"use strict";r("1666")},bb5f:function(e,t,r){"use strict";r.d(t,"m",(function(){return o})),r.d(t,"n",(function(){return n})),r.d(t,"a",(function(){return u})),r.d(t,"g",(function(){return i})),r.d(t,"d",(function(){return a})),r.d(t,"h",(function(){return l})),r.d(t,"o",(function(){return c})),r.d(t,"b",(function(){return d})),r.d(t,"e",(function(){return m})),r.d(t,"i",(function(){return p})),r.d(t,"j",(function(){return f})),r.d(t,"l",(function(){return b})),r.d(t,"c",(function(){return h})),r.d(t,"f",(function(){return j})),r.d(t,"p",(function(){return v})),r.d(t,"k",(function(){return F}));var s=r("b775");function o(e,t){return console.log(t),Object(s["a"])({url:"/testCase/queryList",method:"post",params:e,data:t})}function n(e){return Object(s["a"])({url:"/leftJoin/queryFestCaseTitles",method:"get",params:e})}function u(e){return Object(s["a"])({url:"/testCase/insert",method:"post",data:e})}function i(e){return Object(s["a"])({url:"/testCase/queryById/"+e,method:"get"})}function a(e){return Object(s["a"])({url:"/testCase/delete/"+e,method:"delete"})}function l(e){return Object(s["a"])({url:"/testCase/update",method:"post",data:e})}function c(e,t){return Object(s["a"])({url:"/testCaseStep/queryList",method:"post",params:e,data:t})}function d(e){return Object(s["a"])({url:"/testCaseStep/insert",method:"post",data:e})}function m(e){return Object(s["a"])({url:"/testCaseStep/delete/"+e,method:"delete"})}function p(e){return Object(s["a"])({url:"/testCaseStep/update",method:"post",data:e})}function f(e){var t={featureId:e};return Object(s["a"])({url:"/testCase/queryTestNeedByFeatureId",method:"get",params:t})}function b(){return Object(s["a"])({url:"/testCaseTemplate/queryListByUserId",method:"get"})}function h(e){return Object(s["a"])({url:"/testCaseTemplate/insert",method:"post",data:e})}function j(e){return Object(s["a"])({url:"/testCaseTemplate/delete/"+e,method:"delete"})}function v(e){return Object(s["a"])({url:"/testCaseTemplate/update",method:"post",data:e})}function F(e){return Object(s["a"])({url:"/testCaseTemplate/importTestCase",method:"post",data:e})}},d960:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container add-form add-project"},[r("el-form",{ref:"issueFrom",staticClass:"demo-ruleForm",attrs:{model:e.issueFrom,rules:e.issuerules,"label-width":"120px"}},[r("div",[e.issueFrom.id?e._e():r("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.submitForm("issueFrom",!1)}}},[e._v("保存并新建")]),e.issueFrom.id?e._e():r("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.submitForm("issueFrom",!0)}}},[e._v("保存并返回")]),e.issueFrom.id?r("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.submitForm("issueFrom")}}},[e._v("确认修改")]):e._e(),r("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.giveupBack("issueFrom")}}},[e._v("放弃")]),e.issueFrom.id?e._e():r("router-link",{attrs:{to:"/admincenter/admincenter"}},[r("el-button",{attrs:{type:"text"}},[e._v(e._s(e.$t("lang.PublicBtn.CreateCustomField")))])],1)],1),r("div",{staticClass:"form-box"},[r("el-form-item",{attrs:{label:"缺陷标题",prop:"title"}},[r("el-input",{attrs:{maxlength:"30",size:"small"},model:{value:e.issueFrom.title,callback:function(t){e.$set(e.issueFrom,"title",t)},expression:"issueFrom.title"}})],1),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{size:"small",label:"测试用例",prop:"testCase"}},[r("el-select",{attrs:{placeholder:"关联测试用例"},model:{value:e.issueFrom.testCase,callback:function(t){e.$set(e.issueFrom,"testCase",t)},expression:"issueFrom.testCase"}},e._l(e.testCaseData,(function(e){return r("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{size:"small",label:"开发人员",prop:"developer"}},[r("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请选择开发人员",clearable:"","remote-method":e.remoteReport,loading:e.loading},model:{value:e.issueFrom.developer,callback:function(t){e.$set(e.issueFrom,"developer",t)},expression:"issueFrom.developer"}},e._l(e.optionsArr,(function(e){return r("el-option",{key:e.id,attrs:{label:e.userName,value:e.userName}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{size:"small",label:"测试分类",prop:"caseCategory"}},[r("el-input",{model:{value:e.issueFrom.caseCategory,callback:function(t){e.$set(e.issueFrom,"caseCategory",t)},expression:"issueFrom.caseCategory"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{size:"small",label:"测试分类",prop:"caseCategory"}},[r("el-input",{model:{value:e.issueFrom.caseCategory,callback:function(t){e.$set(e.issueFrom,"caseCategory",t)},expression:"issueFrom.caseCategory"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{size:"small",label:"优先级",prop:"priority"}},[r("el-select",{attrs:{placeholder:"请选择优先级"},model:{value:e.issueFrom.priority,callback:function(t){e.$set(e.issueFrom,"priority",t)},expression:"issueFrom.priority"}},[r("el-option",{attrs:{label:"高",value:"高"}}),r("el-option",{attrs:{label:"中",value:"中"}}),r("el-option",{attrs:{label:"低",value:"低"}})],1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{size:"small",label:"状态",prop:"status"}},[r("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.issueFrom.status,callback:function(t){e.$set(e.issueFrom,"status",t)},expression:"issueFrom.status"}},[r("el-option",{attrs:{label:"open",value:1}}),r("el-option",{attrs:{label:"assigned",value:2}}),r("el-option",{attrs:{label:"closed",value:4}}),r("el-option",{attrs:{label:"fixed",value:3}})],1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{size:"small",label:"测试环境",prop:"env"}},[r("el-select",{attrs:{placeholder:"请选择环境"},model:{value:e.issueFrom.env,callback:function(t){e.$set(e.issueFrom,"env",t)},expression:"issueFrom.env"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{size:"small",label:"浏览器",prop:"browser"}},[r("el-select",{attrs:{placeholder:"请选择浏览器"},model:{value:e.issueFrom.browser,callback:function(t){e.$set(e.issueFrom,"browser",t)},expression:"issueFrom.browser"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{size:"small",label:"平台",prop:"platform"}},[r("el-select",{attrs:{placeholder:"请选择平台"},model:{value:e.issueFrom.platform,callback:function(t){e.$set(e.issueFrom,"platform",t)},expression:"issueFrom.platform"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{size:"small",label:"版本",prop:"version"}},[r("el-select",{attrs:{placeholder:"请选择版本"},model:{value:e.issueFrom.version,callback:function(t){e.$set(e.issueFrom,"version",t)},expression:"issueFrom.version"}})],1)],1)],1),r("el-row"),r("el-form-item",{attrs:{label:e.$t("lang.Project.Description"),prop:"description",size:"small"}},[r("el-input",{attrs:{type:"textarea",maxlength:"2000","show-word-limit":"",autosize:{minRows:4,maxRows:8}},model:{value:e.issueFrom.description,callback:function(t){e.$set(e.issueFrom,"description",t)},expression:"issueFrom.description"}})],1)],1)])],1)},o=[],n=r("5530"),u=(r("a9e3"),r("2f62")),i=r("5132"),a=r("bb5f"),l=r("24d2"),c=r("cf45"),d={name:"Addissue",data:function(){return{optionsArr:[],loading:!1,issueFrom:{},issueFromTemp:{},issuerules:{title:[{required:!0,message:"请输入故事标题",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}],testCase:[{required:!0,message:"请选择关联测试案例",trigger:"change"}],priority:[{required:!0,message:"请选择优先级",trigger:"change"}]},testCaseData:[]}},computed:Object(n["a"])(Object(n["a"])({},Object(u["b"])({lang:function(e){return e.header.lang}})),{},{projectInfo:function(){return this.$store.state.user.userinfo}}),created:function(){var e=this;this.$route.query.id?Object(i["c"])(this.$route.query.id).then((function(t){e.issueFrom=t.data,e.issueFrom.testCase=Number(e.issueFrom.testCase),e.issueFromTemp=Object.assign({},e.issueFrom)})):this.issueFrom.projectId=this.projectInfo.userUseOpenProject.projectId,this.gettestCaseListAll()},mounted:function(){},methods:{remoteReport:function(e){var t=this;""!==e?(this.loading=!0,setTimeout((function(){t.loading=!1,Object(l["n"])({subUserName:e}).then((function(e){t.optionsArr=e.data}))}),200)):this.optionsArr=[]},resetFields:function(){this.issueFrom={id:void 0,projectId:this.projectInfo.userUseOpenProject.projectId,title:void 0,status:void 0,testCase:void 0,developer:void 0,priority:void 0,env:void 0,browser:void 0,platform:void 0,version:void 0,caseCategory:void 0},this.$refs["issueFrom"].resetFields()},gettestCaseListAll:function(){var e=this;Object(a["n"])({projectId:this.projectInfo.userUseOpenProject.projectId,title:""}).then((function(t){e.testCaseData=t.data}))},submitForm:function(e,t){var r=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;if(r.issueFrom.id){var s=Object(c["d"])(r.issueFromTemp,r.issueFrom);s.projectId=r.issueFromTemp.projectId,Object(i["d"])(s).then((function(e){"200"===e.code&&(Object(c["e"])("success",e.msg),Object(c["f"])(r,1e3))})).catch((function(e){console.log(e)}))}else Object(i["a"])(r.issueFrom).then((function(e){"200"===e.code?(Object(c["e"])("success",e.msg),r.resetFields(),t&&Object(c["f"])(r,1e3)):Object(c["e"])("error",e.msg)})).catch((function(e){console.log(e)}))}))},giveupBack:function(){this.issueFrom.id||this.resetFields(),this.returntomenu(this)}}},m=d,p=(r("b3ed"),r("2877")),f=Object(p["a"])(m,s,o,!1,null,"0699be35",null);t["default"]=f.exports}}]);