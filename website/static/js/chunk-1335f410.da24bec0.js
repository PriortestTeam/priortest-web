(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1335f410"],{"2fae":function(e,t,s){"use strict";s("a6cd")},4703:function(e,t,s){"use strict";s.d(t,"f",(function(){return a})),s.d(t,"g",(function(){return o})),s.d(t,"a",(function(){return l})),s.d(t,"d",(function(){return n})),s.d(t,"c",(function(){return i})),s.d(t,"e",(function(){return u})),s.d(t,"b",(function(){return c})),s.d(t,"h",(function(){return m}));var r=s("b775");function a(e,t){return Object(r["a"])({url:"/feature/queryList",method:"post",params:e,data:t})}function o(e){return Object(r["a"])({url:"/leftJoin/queryFeatureTitles",method:"get",params:e})}function l(e){return Object(r["a"])({url:"/feature/insert",method:"post",data:e})}function n(e){return Object(r["a"])({url:"/feature/queryById/"+e,method:"get"})}function i(e){return Object(r["a"])({url:"/feature/delete/"+e,method:"delete"})}function u(e){return Object(r["a"])({url:"/feature/update",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/feature/closeUpdate",method:"post",params:e})}function m(e){return Object(r["a"])({url:"/feature/querySprintList",method:"post",params:e})}},a6cd:function(e,t,s){},bb5f:function(e,t,s){"use strict";s.d(t,"m",(function(){return a})),s.d(t,"n",(function(){return o})),s.d(t,"a",(function(){return l})),s.d(t,"g",(function(){return n})),s.d(t,"d",(function(){return i})),s.d(t,"h",(function(){return u})),s.d(t,"o",(function(){return c})),s.d(t,"b",(function(){return m})),s.d(t,"e",(function(){return p})),s.d(t,"i",(function(){return d})),s.d(t,"j",(function(){return f})),s.d(t,"l",(function(){return b})),s.d(t,"c",(function(){return v})),s.d(t,"f",(function(){return F})),s.d(t,"p",(function(){return C})),s.d(t,"k",(function(){return h}));var r=s("b775");function a(e,t){return console.log(t),Object(r["a"])({url:"/testCase/queryList",method:"post",params:e,data:t})}function o(e){return Object(r["a"])({url:"/leftJoin/queryFestCaseTitles",method:"get",params:e})}function l(e){return Object(r["a"])({url:"/testCase/insert",method:"post",data:e})}function n(e){return Object(r["a"])({url:"/testCase/queryById/"+e,method:"get"})}function i(e){return Object(r["a"])({url:"/testCase/delete/"+e,method:"delete"})}function u(e){return Object(r["a"])({url:"/testCase/update",method:"post",data:e})}function c(e,t){return Object(r["a"])({url:"/testCaseStep/queryList",method:"post",params:e,data:t})}function m(e){return Object(r["a"])({url:"/testCaseStep/insert",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/testCaseStep/delete/"+e,method:"delete"})}function d(e){return Object(r["a"])({url:"/testCaseStep/update",method:"post",data:e})}function f(e){var t={featureId:e};return Object(r["a"])({url:"/testCase/queryTestNeedByFeatureId",method:"get",params:t})}function b(){return Object(r["a"])({url:"/testCaseTemplate/queryListByUserId",method:"get"})}function v(e){return Object(r["a"])({url:"/testCaseTemplate/insert",method:"post",data:e})}function F(e){return Object(r["a"])({url:"/testCaseTemplate/delete/"+e,method:"delete"})}function C(e){return Object(r["a"])({url:"/testCaseTemplate/update",method:"post",data:e})}function h(e){return Object(r["a"])({url:"/testCaseTemplate/importTestCase",method:"post",data:e})}},d83c:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container add-form add-project"},[s("el-form",{ref:"testCaseFrom",staticClass:"demo-ruleForm",attrs:{model:e.testCaseFrom,rules:e.testCaseRules,"label-width":"120px"}},[s("div",[e.testCaseFrom.id?e._e():s("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.submitForm("testCaseFrom",!1)}}},[e._v("保存并新建 ")]),e.testCaseFrom.id?e._e():s("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.submitForm("testCaseFrom",!0)}}},[e._v("保存并返回 ")]),e.testCaseFrom.id?s("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.submitForm("testCaseFrom")}}},[e._v("确认修改 ")]):e._e(),s("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.giveupBack("testCaseFrom")}}},[e._v("放弃 ")]),e.testCaseFrom.id?e._e():s("router-link",{attrs:{to:"/admincenter/admincenter"}},[s("el-button",{attrs:{type:"text"}},[e._v(e._s(e.$t("lang.PublicBtn.CreateCustomField"))+" ")])],1)],1),s("div",{staticClass:"form-box"},[s("el-form-item",{attrs:{label:"测试用例标题",prop:"title"}},[s("el-input",{attrs:{size:"small",maxlength:"15"},model:{value:e.testCaseFrom.title,callback:function(t){e.$set(e.testCaseFrom,"title",t)},expression:"testCaseFrom.title"}})],1),s("el-form-item",{attrs:{label:"描述",prop:"description",size:"small"}},[s("el-input",{attrs:{type:"textarea",maxlength:"1000","show-word-limit":"",autosize:{minRows:3,maxRows:8}},model:{value:e.testCaseFrom.description,callback:function(t){e.$set(e.testCaseFrom,"description",t)},expression:"testCaseFrom.description"}})],1),s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{size:"small",label:"故事",prop:"feature"}},[s("el-select",{attrs:{placeholder:"关联故事"},on:{change:e.getFeatureLikeArgs},model:{value:e.testCaseFrom.feature,callback:function(t){e.$set(e.testCaseFrom,"feature",t)},expression:"testCaseFrom.feature"}},e._l(e.featueData,(function(e){return s("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)],1)],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{size:"small",label:"优先级",prop:"priority"}},[s("el-select",{attrs:{placeholder:"请选择优先级"},model:{value:e.testCaseFrom.priority,callback:function(t){e.$set(e.testCaseFrom,"priority",t)},expression:"testCaseFrom.priority"}},[e._l(e.getOptionsArrData.priority,(function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})})),e._v(" "),s("router-link",{attrs:{to:"/admincenter/admincenter?par=priority"}},[s("el-option",{attrs:{label:"Add New Value",value:""}})],1)],2)],1)],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{size:"small",label:"浏览器",prop:"browser",clearable:""}},[s("el-select",{attrs:{placeholder:"请选择浏览器"},model:{value:e.testCaseFrom.browser,callback:function(t){e.$set(e.testCaseFrom,"browser",t)},expression:"testCaseFrom.browser"}},[e._l(e.getOptionsArrData.browser,(function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})})),e._v(" "),s("router-link",{attrs:{to:"/admincenter/admincenter?par=browser"}},[s("el-option",{attrs:{label:"Add New Value",value:""}})],1)],2)],1)],1)],1),s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{size:"small",label:"平台",prop:"testPlatform"}},[s("el-select",{attrs:{placeholder:"请选择测试平台",clearable:""},model:{value:e.testCaseFrom.testPlatform,callback:function(t){e.$set(e.testCaseFrom,"testPlatform",t)},expression:"testCaseFrom.testPlatform"}},[e._l(e.getOptionsArrData.testPlatform,(function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})})),s("router-link",{attrs:{to:"/admincenter/admincenter?par=test_platform"}},[s("el-option",{attrs:{label:"Add New Value",value:""}})],1)],2)],1)],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{size:"small",label:"状态",prop:"status"}},[s("el-select",{attrs:{placeholder:"请选择状态",clearable:""},model:{value:e.testCaseFrom.status,callback:function(t){e.$set(e.testCaseFrom,"status",t)},expression:"testCaseFrom.status"}},[e._l(e.getOptionsArrData.status,(function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})})),s("router-link",{attrs:{to:"/admincenter/admincenter?par=status"}},[s("el-option",{attrs:{label:"Add New Value",value:""}})],1)],2)],1)],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{size:"small",label:"版本",prop:"version"}},[s("el-select",{attrs:{placeholder:"请选择版本",clearable:""},model:{value:e.testCaseFrom.version,callback:function(t){e.$set(e.testCaseFrom,"version",t)},expression:"testCaseFrom.version"}},[e._l(e.getOptionsArrData.versions,(function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})})),s("router-link",{attrs:{to:"/admincenter/admincenter?par=versions"}},[s("el-option",{attrs:{label:"Add New Value",value:""}})],1)],2)],1)],1)],1),s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{size:"small",label:"测试分类",prop:"caseCategory"}},[s("el-select",{attrs:{placeholder:"请选择测试分类",clearable:""},model:{value:e.testCaseFrom.caseCategory,callback:function(t){e.$set(e.testCaseFrom,"caseCategory",t)},expression:"testCaseFrom.caseCategory"}},[e._l(e.getOptionsArrData.testCategory,(function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})})),s("router-link",{attrs:{to:"/admincenter/admincenter?par=test_category"}},[s("el-option",{attrs:{label:"Add New Value",value:""}})],1)],2)],1)],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{size:"small",label:"测试类型",prop:"caseType"}},[s("el-select",{attrs:{placeholder:"请选择测试类型",clearable:""},model:{value:e.testCaseFrom.testType,callback:function(t){e.$set(e.testCaseFrom,"testType",t)},expression:"testCaseFrom.testType"}},[e._l(e.getOptionsArrData.testType,(function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})})),s("router-link",{attrs:{to:"/admincenter/admincenter?par=test_type"}},[s("el-option",{attrs:{label:"Add New Value",value:""}})],1)],2)],1)],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{size:"small",label:"导入ID",prop:"externalId"}},[s("el-input",{model:{value:e.testCaseFrom.externalId,callback:function(t){e.$set(e.testCaseFrom,"externalId",t)},expression:"testCaseFrom.externalId"}})],1)],1)],1),s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{size:"small",label:"测试环境",prop:"testEnv"}},[s("el-select",{attrs:{placeholder:"请选择测试环境",clearable:""},model:{value:e.testCaseFrom.testEnv,callback:function(t){e.$set(e.testCaseFrom,"testEnv",t)},expression:"testCaseFrom.testEnv"}},[e._l(e.getOptionsArrData.testEnv,(function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})})),s("router-link",{attrs:{to:"/admincenter/admincenter?par=test_env"}},[s("el-option",{attrs:{label:"Add New Value",value:""}})],1)],2)],1)],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{size:"small",label:"模块",prop:"module"}},[s("el-select",{attrs:{placeholder:"请选择模块",clearable:""},model:{value:e.testCaseFrom.module,callback:function(t){e.$set(e.testCaseFrom,"module",t)},expression:"testCaseFrom.module"}},[e._l(e.getOptionsArrData.moudle,(function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})})),s("router-link",{attrs:{to:"/admincenter/admincenter?par=moudle"}},[s("el-option",{attrs:{label:"Add New Value",value:""}})],1)],2)],1)],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{size:"small",label:"测试设备",prop:"testDevice"}},[s("el-select",{attrs:{placeholder:"请选择测试设备1",clearable:""},model:{value:e.testCaseFrom.testDevice,callback:function(t){e.$set(e.testCaseFrom,"testDevice",t)},expression:"testCaseFrom.testDevice"}},[e._l(e.getOptionsArrData.testDevice,(function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})})),s("router-link",{attrs:{to:"/admincenter/admincenter?par=test_device"}},[s("el-option",{attrs:{label:"Add New Value",value:""}})],1)],2)],1)],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{size:"small",label:"测试方法",prop:"testMethod"}},[s("el-select",{attrs:{placeholder:"请选择测试方法",clearable:""},model:{value:e.testCaseFrom.testMethod,callback:function(t){e.$set(e.testCaseFrom,"testMethod",t)},expression:"testCaseFrom.testMethod"}},[e._l(e.getOptionsArrData.testMethod,(function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})})),s("router-link",{attrs:{to:"/admincenter/admincenter?par=test_method"}},[s("el-option",{attrs:{label:"Add New Value",value:""}})],1)],2)],1)],1)],1),s("el-form-item",{attrs:{label:"测试数据",prop:"testData",size:"small"}},[s("el-input",{attrs:{type:"textarea",maxlength:"1000","show-word-limit":"",autosize:{minRows:3,maxRows:5}},model:{value:e.testCaseFrom.testData,callback:function(t){e.$set(e.testCaseFrom,"testData",t)},expression:"testCaseFrom.testData"}})],1),s("el-form-item",{attrs:{label:"测试条件",prop:"preCondition",size:"small"}},[s("el-input",{attrs:{type:"textarea",maxlength:"1000","show-word-limit":"",autosize:{minRows:3,maxRows:5}},model:{value:e.testCaseFrom.preCondition,callback:function(t){e.$set(e.testCaseFrom,"preCondition",t)},expression:"testCaseFrom.preCondition"}})],1),s("el-form-item",{attrs:{label:"备注",prop:"comments",size:"small"}},[s("el-input",{attrs:{type:"textarea",maxlength:"1000","show-word-limit":"",autosize:{minRows:3,maxRows:8}},model:{value:e.testCaseFrom.comments,callback:function(t){e.$set(e.testCaseFrom,"comments",t)},expression:"testCaseFrom.comments"}})],1)],1)]),e.testCaseFrom.id?s("div",{staticClass:"table"},[s("el-button",{attrs:{type:"text"},on:{click:e.newStep}},[e._v("新建步骤")]),s("el-table",{ref:"stepData",staticStyle:{width:"100%"},attrs:{data:e.stepData,"header-cell-style":e.tableHeader,stripe:""}},[s("el-table-column",{attrs:{type:"index",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}],null,!1,3056706777)}),s("el-table-column",{attrs:{prop:"step",label:"步骤","show-overflow-tooltip":!0,align:"center"}}),s("el-table-column",{attrs:{prop:"stepData",label:"运行数据"}}),s("el-table-column",{attrs:{prop:"expectedResult",label:"预计结果","show-overflow-tooltip":!0,align:"center"}}),s("el-table-column",{attrs:{label:"操作",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{staticClass:"table-btn",attrs:{type:"text"},on:{click:function(s){return s.stopPropagation(),e.toEdit(t.row)}}},[e._v("编辑 ")]),s("el-button",{staticClass:"table-btn",attrs:{type:"text"},on:{click:function(s){return s.stopPropagation(),e.delview(t.row)}}},[e._v("删除 ")])]}}],null,!1,2769356720)})],1)],1):e._e(),s("el-dialog",{attrs:{title:"新建步骤",visible:e.openDia,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.openDia=t}}},[s("el-form",{ref:"stepFrom",attrs:{model:e.stepFrom,rules:e.stepFromRules,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"步骤",prop:"step",size:"small"}},[s("el-input",{attrs:{maxlength:"20",placeholder:"请输入步骤"},model:{value:e.stepFrom.step,callback:function(t){e.$set(e.stepFrom,"step",t)},expression:"stepFrom.step"}})],1),s("el-form-item",{attrs:{label:"运行数据",prop:"stepData",size:"small"}},[s("el-input",{attrs:{maxlength:"20",placeholder:"请输入步骤运行数据"},model:{value:e.stepFrom.stepData,callback:function(t){e.$set(e.stepFrom,"stepData",t)},expression:"stepFrom.stepData"}})],1),s("el-form-item",{attrs:{label:"预期结果",prop:"expectedResult",size:"small"}},[s("el-input",{attrs:{type:"textarea",maxlength:"100","show-word-limit":"",autosize:{minRows:2,maxRows:3},placeholder:"请输入预期结果"},model:{value:e.stepFrom.expectedResult,callback:function(t){e.$set(e.stepFrom,"expectedResult",t)},expression:"stepFrom.expectedResult"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.submitStepFrom}},[e._v("确 定")]),s("el-button",{on:{click:e.cancelStepFrom}},[e._v("取 消")])],1)],1)],1)},a=[],o=s("5530"),l=(s("d3b7"),s("159b"),s("2f62")),n=s("4703"),i=s("bb5f"),u=s("f5dd"),c=s("cf45"),m={name:"Addtestcase",data:function(){return{getOptionsArr:["versions","testCategory","testType","testEnv","testPlatform","status","browser","priority","moudle","testDevice","testMethod"],getOptionsArrData:{versions:[],testCategory:[],testType:[],testEnv:[],testPlatform:[],status:[],browser:[],priority:[],moudle:[],testDevice:[],testMethod:[]},featueData:[],testCaseFrom:{},testCaseFromTem:{},testCaseRules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],feature:[{required:!0,message:"请选择故事",trigger:"change"}]},tableHeader:{color:"#d4dce3",background:"#4286CD"},stepData:[],openDia:!1,stepFrom:{},stepFromTemp:{},stepFromRules:{step:[{required:!0,message:"请输入步骤",trigger:"blur"}],expectedResult:[{required:!0,message:"请输入预期结果",trigger:"blur"}]}}},computed:Object(o["a"])(Object(o["a"])({},Object(l["b"])({lang:function(e){return e.header.lang}})),{},{projectInfo:function(){return this.$store.state.user.userinfo}}),created:function(){var e=this;this.$route.query.id?(this.stepFrom.testCaseId=this.$route.query.id,Object(i["g"])(this.$route.query.id).then((function(t){console.log(t),e.stepFrom.testCaseId=t.data.id,e.testCaseFrom=t.data,e.testCaseFromTem=Object.assign({},e.testCaseFrom)})),this.getTestStep()):this.testCaseFrom.projectId=this.projectInfo.userUseOpenProject.projectId,Object(n["g"])({projectId:this.projectInfo.userUseOpenProject.projectId,title:""}).then((function(t){e.featueData=t.data})),this.getOptionsArr.forEach((function(t){Object(u["a"])({fieldName:t}).then((function(s){e.getOptionsArrData[t]=s.data.mergeValues?s.data.mergeValues:[]}))}))},methods:{getTestStep:function(){var e=this;Object(i["o"])({pageNum:1,pageSize:10},{testCaseId:this.stepFrom.testCaseId}).then((function(t){e.stepData=t.data}))},resetFields:function(){this.testCaseFrom={id:void 0,projectId:this.projectInfo.userUseOpenProject.projectId,title:void 0,description:void 0,priority:void 0,feature:void 0,browser:void 0,testPlatform:void 0,status:void 0,version:void 0,caseCategory:void 0,caseType:void 0,externalId:void 0,testEnv:void 0,module:void 0,testDevice:void 0,testMethod:void 0,testData:void 0,preCondition:void 0,comments:void 0},this.$refs["testCaseFrom"].resetFields()},submitForm:function(e,t){var s=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;if(s.testCaseFrom.id){var r=Object(c["d"])(s.testCaseFromTem,s.testCaseFrom);r.projectId=s.testCaseFrom.projectId,Object(i["h"])(r).then((function(e){"200"===e.code&&(Object(c["e"])("success",e.msg),Object(c["f"])(s,1e3))})).catch((function(e){console.log(e)}))}else Object(i["a"])(s.testCaseFrom).then((function(e){"200"===e.code&&(Object(c["e"])("success",e.msg),s.resetFields(),t&&Object(c["f"])(s,1e3))})).catch((function(e){console.log(e)}))}))},giveupBack:function(){this.testCaseFrom.id||this.resetFields(),this.returntomenu(this)},resetStepFrom:function(){this.stepFrom={testCaseId:void 0,step:void 0,stepData:void 0,expectedResult:void 0},this.$refs["stepFrom"].resetFields()},newStep:function(){this.openDia=!0},submitStepFrom:function(){var e=this;this.$refs["stepFrom"].validate((function(t){if(t)if(e.stepFrom.id){var s=Object(c["d"])(e.stepFromTemp,e.stepFrom);s.testCaseId=e.stepFrom.testCaseId,Object(i["i"])(s).then((function(t){"200"===t.code&&(e.getTestStep(),Object(c["e"])("success",t.msg),e.openDia=!1,e.stepFromTemp={},e.stepFrom={})}))}else Object(i["b"])(e.stepFrom).then((function(t){"200"===t.code&&(e.getTestStep(),Object(c["e"])("success",t.msg),e.openDia=!1,e.resetStepFrom())}))}))},cancelStepFrom:function(){this.resetStepFrom(),this.openDia=!1},toEdit:function(e){this.stepFrom=Object.assign({},e),this.openDia=!0,this.stepFromTemp=Object.assign({},e)},delview:function(e){var t=this;Object(i["e"])(e.id).then((function(e){"200"===e.code&&(Object(c["e"])("success",e.msg),t.getTestStep())}))},getFeatureLikeArgs:function(e){var t=this;(void 0!==this.testCaseFrom.module&&""!==this.testCaseFrom.module||void 0!==this.testCaseFrom.version&&""!==this.testCaseFrom.version)&&this.$confirm("重新选择可能会丢失内容请确认？",{title:"提示",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(e){t.testCaseFrom.module="",t.testCaseFrom.version=""})).catch((function(e){})),Object(i["j"])(e).then((function(e){var s=e.data;t.$set(t.testCaseFrom,"version",s.version),t.$set(t.testCaseFrom,"module",s.moudle)}))}}},p=m,d=(s("2fae"),s("2877")),f=Object(d["a"])(p,r,a,!1,null,"05271e96",null);t["default"]=f.exports},f5dd:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var r=s("b775");function a(e){return Object(r["a"])({url:"/sysCustomField/getSysCustomField",method:"get",params:e})}}}]);