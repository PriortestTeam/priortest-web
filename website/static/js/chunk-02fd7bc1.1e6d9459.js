(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02fd7bc1"],{1772:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comp-tree"},[n("div",{staticClass:"new_project"},[n("el-button",{attrs:{type:"primary",round:""}},[n("div",{on:{click:e.toViewManage}},[e._v(" 新建/管理视图 ")])]),n("span",{staticClass:"icon-box"},[n("i",{staticClass:"el-icon-d-arrow-left",attrs:{title:"折叠"},on:{click:e.hadleShow}})])],1),n("div",{staticClass:"comp-data"},[n("div",{staticClass:"big-width"},[n("el-tree",{attrs:{data:e.setTree,props:e.defaultProps,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node;return n("span",{staticClass:"custom-tree-node"},[n("span",{on:{click:function(t){return e.getList(r.data)}}},[e._v(e._s(r.label))])])}}])})],1)])])},o=[],i=n("24d2"),s={name:"ViewTree",props:{childScope:{type:String,required:!0}},data:function(){return{setTree:[],defaultProps:{children:"childViews",label:"title"},viewUrl:"/project/projectview?scope="+this.childScope,projectQuery:{pageNum:1,pageSize:10}}},computed:{projectInfo:function(){return this.$store.state.user.userinfo}},created:function(){this.queryViewTree()},methods:{toViewManage:function(){this.$store.commit("common/setNavName",this.childScope),this.$router.push("/project/projectview")},hadleShow:function(){this.$emit("hadleTree")},getList:function(e){console.log(e);var t={projectId:this.projectInfo.userUseOpenProject.projectId,viewTreeDto:{id:e.id}};this.$emit("childByValue",t)},queryViewTree:function(){var e=this,t={scope:this.childScope};Object(i["q"])(t).then((function(t){e.setTree=t.data}))}}},a=s,u=(n("55a0"),n("2877")),c=Object(u["a"])(a,r,o,!1,null,"2c2e417a",null);t["a"]=c.exports},"24d2":function(e,t,n){"use strict";n.d(t,"o",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return a})),n.d(t,"c",(function(){return u})),n.d(t,"r",(function(){return c})),n.d(t,"m",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"s",(function(){return p})),n.d(t,"e",(function(){return f})),n.d(t,"k",(function(){return h})),n.d(t,"n",(function(){return m})),n.d(t,"j",(function(){return b})),n.d(t,"i",(function(){return j})),n.d(t,"l",(function(){return w})),n.d(t,"p",(function(){return g})),n.d(t,"q",(function(){return v})),n.d(t,"h",(function(){return y})),n.d(t,"g",(function(){return O}));var r=n("b775");function o(e,t){return Object(r["a"])({url:"/project/queryForProjects",method:"post",params:e,data:t})}function i(e){return Object(r["a"])({url:"/project/addProject",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/project/deleteProject/"+e,method:"delete"})}function a(e){return Object(r["a"])({url:"/project/updateProject",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/project/checkProject/"+e,method:"get"})}function c(e,t){return Object(r["a"])({url:"/view/queryViews",method:"post",params:t,data:e})}function l(e){return Object(r["a"])({url:"/view/queryById/"+e,method:"get"})}function d(e){return Object(r["a"])({url:"/view/addViewRE",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/view/updateView",method:"post",data:e})}function f(e){return Object(r["a"])({url:"/view/deleteView/"+e,method:"delete"})}function h(){return Object(r["a"])({url:"/view/getViewFilter",method:"post"})}function m(e){return Object(r["a"])({url:"/user/queryByNameSubUsers",method:"post",params:e})}function b(e){return Object(r["a"])({url:"/project/queryById/"+e,method:"get"})}function j(e){return Object(r["a"])({url:"/project/getCloseProject",method:"get",params:e})}function w(e){return Object(r["a"])({url:"/view/getViewScopeChildParams",method:"get",params:e})}function g(e){return Object(r["a"])({url:"/view/queryViewParents",method:"get",params:e})}function v(e){return Object(r["a"])({url:"/view/queryViewTrees",method:"get",params:e})}function y(){return Object(r["a"])({url:"/project/getAllSysCustomField",method:"get"})}function O(e){return Object(r["a"])({url:"/project/getAllCustomField",method:"post",data:e})}},"461d":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"project-container app-container"},[0==e.treeCol?n("div",{staticClass:"showBtn",on:{click:e.hadleTreeshow}},[n("i",{staticClass:"el-icon-d-arrow-right"})]):e._e(),n("el-row",[n("el-col",{attrs:{span:e.treeCol}},[n("view-tree",{attrs:{"child-scope":e.currentScope},on:{hadleTree:e.hadleTreeshow,childByValue:e.childByValue}})],1),n("el-col",{attrs:{span:24-e.treeCol}},[n("el-card",[n("div",{staticClass:"project_table"},[n("div",{staticClass:"new_project"},[n("el-button",{attrs:{type:"primary",round:""},on:{click:e.newproject}},[e._v(" 新建缺陷 ")])],1),n("div",{staticClass:"oprate_btn"},[n("el-button",{attrs:{type:"text"},on:{click:e.projectRefresh}},[e._v("刷新")]),n("el-button",{attrs:{type:"text",disabled:e.single},on:{click:e.projectClone}},[e._v("克隆")]),n("el-button",{attrs:{type:"text",disabled:e.multiple},on:{click:function(t){return e.delproject("all")}}},[e._v("批量删除")])],1),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"protable table"},[n("el-table",{ref:"issueData",staticStyle:{width:"100%"},attrs:{data:e.issueData,"header-cell-style":e.tableHeader,stripe:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{type:"index",align:"center",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),n("el-table-column",{attrs:{prop:"title","show-overflow-tooltip":!0,align:"left",width:"155",label:e.$t("lang.CommonFiled.Title")},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"title",on:{click:function(n){return e.openEdit(t.row)}}},[e._v(" "+e._s(t.row.title)+" ")])]}}])}),n("el-table-column",{attrs:{prop:"status",align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(1===t.row.status?"open":2===t.row.status?"assigned":3===t.row.status?"fixed":4===t.row.status?"closed":""))])]}}])}),n("el-table-column",{attrs:{prop:"version",align:"center",label:"版本"}}),n("el-table-column",{attrs:{prop:"feature",align:"center",label:"故事"}}),n("el-table-column",{attrs:{prop:"test_env",align:"center",label:"测试环境"}}),n("el-table-column",{attrs:{prop:"test_platform",align:"center",label:"测试平台"}}),n("el-table-column",{attrs:{prop:"test_cycle",align:"center",label:"测试周期"}}),n("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建日期","min-width":"120","show-overflow-tooltip":!0}}),n("el-table-column",{attrs:{label:"操作","min-width":"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"line"},[e._v("|")]),e._v(" --\x3e "),n("el-button",{staticClass:"table-btn",attrs:{type:"text"},on:{click:function(n){return n.stopPropagation(),e.openEdit(t.row)}}},[e._v("克隆")]),n("el-button",{staticClass:"table-btn",attrs:{type:"text"},on:{click:function(n){return n.stopPropagation(),e.delproject(t.row.id)}}},[e._v("删除")])]}}])})],1),n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.issueTotal>0,expression:"issueTotal > 0"}],attrs:{total:e.issueTotal,page:e.issueQuery.pageNum,limit:e.issueQuery.pageSize},on:{"update:page":function(t){return e.$set(e.issueQuery,"pageNum",t)},"update:limit":function(t){return e.$set(e.issueQuery,"pageSize",t)},pagination:e.getIssueList}})],1)])])],1)],1)],1)},o=[],i=n("1da1"),s=(n("96cf"),n("d3b7"),n("fb6a"),n("1772")),a=n("cf45"),u=n("5132"),c={name:"Issue",components:{viewTree:s["a"]},data:function(){return{treeCol:5,currentScope:"Issue",tableHeader:{color:"#d4dce3",background:"#4286CD"},isLoading:!1,activeNames:["1"],issueQuery:{pageNum:1,pageSize:10},issueTotal:0,issueData:[],multipleSelection:[],single:!0,multiple:!0,issueIds:"",setTree:[],issueBody:{scope:"",projectId:""},viewSearchQueryId:""}},computed:{projectInfo:function(){return this.$store.state.user.userinfo}},created:function(){this.getIssueList()},methods:{newproject:function(){this.$router.push({name:"Addissue"})},getIssueList:function(){var e=this;this.isLoading=!0;var t={projectId:this.projectInfo.userUseOpenProject.projectId,viewTreeDto:{id:this.viewSearchQueryId}};return new Promise((function(n,r){Object(u["e"])(e.issueQuery,t).then(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:"200"===r.code&&(r.total>0&&(e.issueBody.scope=r.data[0].scope,e.issueBody.projectId=e.projectInfo.userUseOpenProject.projectId),e.isLoading=!1,e.issueData=r.data,e.issueTotal=r.total,n(r));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))},projectRefresh:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getIssueList();case 2:n=t.sent,"200"===n.code&&(Object(a["e"])("success","刷新成功"),e.viewSearchQueryId="");case 4:case"end":return t.stop()}}),t)})))()},projectClone:function(){Object(a["e"])("error","暂未开发")},delproject:function(e){var t=this;"all"!==e?Object(u["b"])(e).then((function(e){"200"===e.code&&(Object(a["e"])("success",e.msg),t.getIssueList())})):Object(a["e"])("error","暂未开发")},handleSelectionChange:function(e){this.multipleSelection=e,this.issueIds="";for(var t=0;t<e.length;t++)this.issueIds+=e[t].id+",";this.issueIds=this.issueIds.slice(0,this.issueIds.length-1),this.multiple=!e.length,this.single=1!==e.length},openEdit:function(e){this.$router.push({name:"Addissue",query:{id:e.id}})},childByValue:function(e){var t=this;this.isLoading=!0,this.viewSearchQueryId=e.viewTreeDto.id,Object(u["e"])(this.featureQuery,e).then((function(e){t.issueData=e.data,t.issueTotal=e.total,t.isLoading=!1}))},hadleTreeshow:function(){this.treeCol=5===this.treeCol?0:5}}},l=c,d=(n("5283"),n("2877")),p=Object(d["a"])(l,r,o,!1,null,"35866dbc",null);t["default"]=p.exports},5132:function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return u}));var r=n("b775");function o(e,t){return Object(r["a"])({url:"/issue/queryList",method:"post",params:e,data:t})}function i(e){return Object(r["a"])({url:"/issue/insert",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/issue/queryById/"+e,method:"get"})}function a(e){return Object(r["a"])({url:"/issue/delete/"+e,method:"delete"})}function u(e){return Object(r["a"])({url:"/issue/update",method:"post",data:e})}},5283:function(e,t,n){"use strict";n("b9fe")},"55a0":function(e,t,n){"use strict";n("e29b")},b9fe:function(e,t,n){},e29b:function(e,t,n){}}]);