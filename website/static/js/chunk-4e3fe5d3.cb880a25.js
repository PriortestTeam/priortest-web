(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e3fe5d3"],{"1d5d":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container manage-view generate-token"},[r("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[r("div",{staticClass:"new_project"},[r("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return t.stopPropagation(),e.generateToken(t)}}},[e._v("新增")]),r("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return t.stopPropagation(),e.waiveForm("form")}}},[e._v("取消")])],1),r("div",{staticClass:"scopeView"},[r("el-form-item",{staticClass:"form-small",attrs:{label:"密钥名称",prop:"tokenName"}},[r("el-input",{attrs:{size:"small",disabled:e.disable},model:{value:e.form.tokenName,callback:function(t){e.$set(e.form,"tokenName",t)},expression:"form.tokenName"}})],1),r("el-form-item",{staticClass:"form-small",attrs:{label:"失效日期",prop:"expirationTime"}},[r("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions,size:"small",placeholder:"失效日期"},model:{value:e.form.expirationTime,callback:function(t){e.$set(e.form,"expirationTime",t)},expression:"form.expirationTime"}})],1)],1)]),r("div",{staticClass:"table"},[r("el-button",{attrs:{type:"text"},on:{click:e.queryListTokens}},[e._v("刷新")]),r("el-table",{ref:"viewData",staticStyle:{width:"100%"},attrs:{data:e.viewData,"header-cell-style":e.tableHeader,stripe:""},on:{"row-click":e.toEdit,"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{prop:"token_name","show-overflow-tooltip":!0,align:"left",width:"155",label:"密钥名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticClass:"title",on:{click:function(r){return e.toEdit(t.row)}}},[e._v(" "+e._s(t.row.token_name)+" ")])]}}])}),r("el-table-column",{attrs:{prop:"token_value",label:"密钥值"}}),r("el-table-column",{attrs:{prop:"expiration_time",label:"失效日期"}}),r("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{staticClass:"table-btn",attrs:{type:"text"},on:{click:function(r){return r.stopPropagation(),e.delToken(t.row.id)}}},[e._v("删除")])]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.viewTotal>0,expression:"viewTotal > 0"}],attrs:{total:e.viewTotal,page:e.viewQuery.pageNum,limit:e.viewQuery.pageSize},on:{"update:page":function(t){return e.$set(e.viewQuery,"pageNum",t)},"update:limit":function(t){return e.$set(e.viewQuery,"pageSize",t)},pagination:e.getqueryViews}})],1)],1)},i=[],o=r("1da1"),a=r("5530"),c=(r("a9e3"),r("d3b7"),r("498a"),r("a434"),r("96cf"),r("cf45")),s=r("c24f"),u=r("24d2"),l=r("2f62"),f={name:"GenerateToken",data:function(){return{pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},disable:!1,scopeDownChildParams:[],statusDownChildParams:[],savedisabled:!0,form:{tokenName:"",expirationTime:""},fromTemp:{},scopeDis:!1,rules:{tokenName:[{required:!0,message:"请输入密钥名称",trigger:"blur"}],expirationTime:[{required:!0,message:"请选择失效日期",trigger:"change"}]},tableHeader:{color:"#d4dce3",background:"#4286CD"},viewQuery:{pageNum:1,pageSize:10},viewBody:{scope:"",projectId:""},viewParentQuery:"0",viewParents:[],viewTotal:0,viewData:[],multipleSelection:[],multiple:!0,viewId:"",conditionList:[],filter:!1,email:""}},computed:Object(a["a"])(Object(a["a"])({},Object(l["c"])({nvaName:function(e){return e.common.nvaName}})),{},{projectInfo:function(){return this.$store.state.user.userinfo}}),watch:{email:function(e){console.log("val---",e)}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.email=e.$route.query.email,console.log("email--",e.email),e.queryListTokens();case 3:case"end":return t.stop()}}),t)})))()},methods:{generateToken:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e,n=r.form,console.log("form---",n),t.prev=3,t.next=6,r.$refs.form.validate();case 6:return t.next=8,Object(s["i"])(n);case 8:i=t.sent,"200"===i.code&&(Object(c["e"])("success",i.msg),r.queryListTokens()),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](3),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[3,12]])})))()},queryListTokens:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={},t.next=3,Object(s["f"])(r);case 3:n=t.sent,"200"===n.code&&(e.viewData=n.data,e.viewTotal=Number(n.total));case 5:case"end":return t.stop()}}),t)})))()},delToken:function(e){var t=this;if("all"!==e){var r={tokenId:e};t.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["c"])(r).then((function(e){200===e.code&&(c["e"].success(e.msg),t.currentPage=1,t.pageSize=10,t.queryListTokens(),t.cancelUpdate())}))})).catch((function(){}))}else Object(c["e"])("error","暂未开发")},toEdit:function(e){var t=this;t.$refs.viewData.clearSelection(),e.id?t.disable=!0:t.disable=!1,t.form.tokenName=e.token_name,t.form.expirationTime=e.expiration_time},waiveForm:function(){Object(c["f"])(this,1e3)},cancelUpdate:function(){this.$refs.viewData.clearSelection(),this.resetForm()},resetForm:function(){this.form={tokenName:"",expirationTime:""},this.$refs["form"].resetFields()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;if(t.from.id){var r=Object(c["d"])(t.fromTemp,t.from);r.oneFilters=t.from.oneFilters,r.scope=t.from.scope,Object(u["s"])(r).then((function(e){"200"===e.code&&(Object(c["e"])("success",e.msg),t.cancelUpdate(),t.getqueryViews())}))}else Object(u["b"])(t.from).then((function(e){"200"===e.code&&(t.resetForm(),Object(c["e"])("success",e.msg),t.getqueryViews())}))}))},handleSelectionChange:function(e){this.multipleSelection=e,this.multiple=!e.length},searchViewInfo:function(){var e=this;Object(u["m"])(this.viewId).then((function(t){"200"===t.code&&(0===t.data.isPrivate?t.data.isPrivate="0":t.data.isPrivate="1",e.from=t.data,e.scopeDis=!0,e.fromTemp=Object.assign({},e.from))}))},getqueryViews:function(){var e=this;return new Promise((function(t,r){Object(u["r"])(e.viewBody,e.viewQuery).then((function(r){"200"===r.code&&(e.viewData=r.data,e.viewTotal=r.total,t(r))}))}))},viewjectRefresh:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getqueryViews();case 2:r=t.sent,"200"===r.code&&Object(c["e"])("success","刷新成功");case 4:case"end":return t.stop()}}),t)})))()},addFliter:function(){if(void 0!==this.from.scope&&""!==this.from.scope.trim()){var e={andOr:"and",beginDate:"",endDate:"",fieldName:"",intVal:"",sourceVal:"",textVal:"",condition:"",type:"fString"};this.from.oneFilters.push(e)}else Object(c["e"])("warning","请选择作用域")},delRemove:function(e){this.from.oneFilters.splice(e,1)},getType:function(e,t){for(var r=0;r<this.scopeDownChildParams.length;r++){var n=this.scopeDownChildParams[r];if(n.filedName===e)return void 0!==n.selectChild&&n.selectChild.length>0&&(console.log("statusDownChildParams",this.statusDownChildParams),this.statusDownChildParams=n.selectChild),void(this.from.oneFilters[t].type=n.type)}},viewScopeChildParams:function(){var e=this;this.from.oneFilters.length>0&&this.$confirm("重新选择可能会丢失页面内容请确认？",{title:"提示",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(t){e.from.oneFilters=[]})).catch((function(t){e.$router.go(0)}));var t={scope:this.from.scope};Object(u["l"])(t).then((function(t){e.scopeDownChildParams=t.data}))},dataFilter:function(e){this.viewParentQuery=e},queryViewParent:function(){var e=this;if(void 0===this.from.scope||""===this.from.scope)return Object(c["e"])("success","请选择作用域"),void(this.viewParentQuery="0");var t={viewTitle:this.viewParentQuery,scope:this.from.scope};Object(u["p"])(t).then((function(t){e.viewParents=t.data}))},fuzhiFrom:function(e){this.from.parentId=e}}},d=f,m=(r("a5a1"),r("b67f"),r("2877")),p=Object(m["a"])(d,n,i,!1,null,"8f5a8e66",null);t["default"]=p.exports},2121:function(e,t,r){},"24d2":function(e,t,r){"use strict";r.d(t,"o",(function(){return i})),r.d(t,"a",(function(){return o})),r.d(t,"d",(function(){return a})),r.d(t,"f",(function(){return c})),r.d(t,"c",(function(){return s})),r.d(t,"r",(function(){return u})),r.d(t,"m",(function(){return l})),r.d(t,"b",(function(){return f})),r.d(t,"s",(function(){return d})),r.d(t,"e",(function(){return m})),r.d(t,"k",(function(){return p})),r.d(t,"n",(function(){return h})),r.d(t,"j",(function(){return w})),r.d(t,"i",(function(){return v})),r.d(t,"l",(function(){return b})),r.d(t,"p",(function(){return g})),r.d(t,"q",(function(){return j})),r.d(t,"h",(function(){return y})),r.d(t,"g",(function(){return O}));var n=r("b775");function i(e,t){return Object(n["a"])({url:"/project/queryForProjects",method:"post",params:e,data:t})}function o(e){return Object(n["a"])({url:"/project/addProject",method:"post",data:e})}function a(e){return Object(n["a"])({url:"/project/deleteProject/"+e,method:"delete"})}function c(e){return Object(n["a"])({url:"/project/updateProject",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/project/checkProject/"+e,method:"get"})}function u(e,t){return Object(n["a"])({url:"/view/queryViews",method:"post",params:t,data:e})}function l(e){return Object(n["a"])({url:"/view/queryById/"+e,method:"get"})}function f(e){return Object(n["a"])({url:"/view/addViewRE",method:"post",data:e})}function d(e){return Object(n["a"])({url:"/view/updateView",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/view/deleteView/"+e,method:"delete"})}function p(){return Object(n["a"])({url:"/view/getViewFilter",method:"post"})}function h(e){return Object(n["a"])({url:"/user/queryByNameSubUsers",method:"post",params:e})}function w(e){return Object(n["a"])({url:"/project/queryById/"+e,method:"get"})}function v(e){return Object(n["a"])({url:"/project/getCloseProject",method:"get",params:e})}function b(e){return Object(n["a"])({url:"/view/getViewScopeChildParams",method:"get",params:e})}function g(e){return Object(n["a"])({url:"/view/queryViewParents",method:"get",params:e})}function j(e){return Object(n["a"])({url:"/view/queryViewTrees",method:"get",params:e})}function y(){return Object(n["a"])({url:"/project/getAllSysCustomField",method:"get"})}function O(e){return Object(n["a"])({url:"/project/getAllCustomField",method:"post",data:e})}},"2e25":function(e,t,r){},a434:function(e,t,r){"use strict";var n=r("23e7"),i=r("23cb"),o=r("a691"),a=r("50c4"),c=r("7b0b"),s=r("65f0"),u=r("8418"),l=r("1dde"),f=r("ae40"),d=l("splice"),m=f("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,w=9007199254740991,v="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!d||!m},{splice:function(e,t){var r,n,l,f,d,m,b=c(this),g=a(b.length),j=i(e,g),y=arguments.length;if(0===y?r=n=0:1===y?(r=0,n=g-j):(r=y-2,n=h(p(o(t),0),g-j)),g+r-n>w)throw TypeError(v);for(l=s(b,n),f=0;f<n;f++)d=j+f,d in b&&u(l,f,b[d]);if(l.length=n,r<n){for(f=j;f<g-n;f++)d=f+n,m=f+r,d in b?b[m]=b[d]:delete b[m];for(f=g;f>g-n+r;f--)delete b[f-1]}else if(r>n)for(f=g-n;f>j;f--)d=f+n-1,m=f+r-1,d in b?b[m]=b[d]:delete b[m];for(f=0;f<r;f++)b[f+j]=arguments[f+2];return b.length=g-n+r,l}})},a5a1:function(e,t,r){"use strict";r("2121")},b67f:function(e,t,r){"use strict";r("2e25")}}]);